import React, { useState, useEffect, useRef } from 'react';
import { motion, useScroll, useTransform } from 'framer-motion';
import { Project, Skill } from '@/entities/all';

// Component Imports
import Hero from '@/components/portfolio/DilipHero';
import About from '@/components/portfolio/DilipAbout';
import Services from '@/components/portfolio/DilipServices';
import Projects from '@/components/portfolio/DilipProjects';
import Resume from '@/components/portfolio/DilipResume';
import Contact from '@/components/portfolio/DilipContact';

export default function HomePage() {
  const [projects, setProjects] = useState([]);
  const [skills, setSkills] = useState([]);

  useEffect(() => {
    const fetchData = async () => {
      const [projectData, skillData] = await Promise.all([
        Project.list('displayOrder'),
        Skill.list()
      ]);
      setProjects(projectData);
      setSkills(skillData);
    };
    fetchData();
    
    // Load particles.js script
    const script = document.createElement('script');
    script.src = "https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js";
    script.onload = () => {
      if (window.particlesJS) {
        window.particlesJS("particles-js", {
            "particles": { "number": {"value":70,"density":{"enable":true,"value_area":900}}, "color":{"value":["#64ffda","#00cfff"]}, "shape":{"type":"circle"}, "opacity":{"value":0.28}, "size":{"value":2.5}, "move":{"enable":true,"speed":1.6,"direction":"none","out_mode":"out"}},
            "interactivity": {"events":{"onhover":{"enable":false}}}
        });
      }
    };
    document.body.appendChild(script);
    
    return () => {
        document.body.removeChild(script);
    }
  }, []);

  return (
    <div>
      <Hero />
      <About />
      <Services skills={skills} />
      <Projects projects={projects} />
      <Resume />
      <Contact />
    </div>
  );
}
