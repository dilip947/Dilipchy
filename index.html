<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dilip Choudhary — The Data Architect (Portfolio)</title>
  <meta name="description" content="Cinematic single-page portfolio - hero, timeline, skills globe, projects gallery, conversational contact and resume viewer." />
  <!-- Fonts (system + Inter fallback) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- GSAP (optional for smooth animations) and Three.js via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r148/three.min.js" defer></script>

  <style>
  /* ===========================
     Base variables and reset
     =========================== */
  :root{
    --bg-very-dark: #03040a;
    --bg-dark: #071019;
    --panel: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.03);
    --muted: rgba(220,230,240,0.6);
    --accent: #00d4ff;
    --accent2: #8aff6e;
    --accent-strong: linear-gradient(90deg,#00d4ff,#8aff6e);
    --radius: 14px;
    --maxw: 1200px;
    --ease: cubic-bezier(.2,.9,.25,1);
    --hero-profile-size: 260px;
    --nav-orb-size: 62px;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: radial-gradient(800px 400px at 10% 10%, rgba(0,40,60,0.06), transparent), var(--bg-very-dark);
    color: #e8eef6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
    line-height:1.45;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}

  .wrap{
    width:100%;
    max-width:var(--maxw);
    margin:0 auto;
    padding:0 22px;
  }

  /* ===========================
     Canvas and background layers
     =========================== */
  canvas#bgCanvas{
    position:fixed; inset:0; width:100%; height:100%; z-index:0; pointer-events:none;
    mix-blend-mode:screen; opacity:0.95;
  }
  .bg-overlay{
    position:fixed; inset:0; z-index:1; pointer-events:none;
    background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.35));
  }

  /* ===========================
     Header / Hero
     =========================== */
  header.hero{
    position:relative; min-height:100vh; display:flex; align-items:center; justify-content:center; z-index:2;
    padding:36px 0;
  }
  .hero-inner{
    text-align:center; display:flex; flex-direction:column; align-items:center; gap:16px;
    width:100%;
  }

  /* Profile "orb" */
  .profile-orb{
    width:var(--hero-profile-size); height:var(--hero-profile-size);
    border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 20px 60px rgba(0,0,0,0.7), inset 0 0 40px rgba(255,255,255,0.02);
    transition: transform 600ms var(--ease), box-shadow 600ms var(--ease);
    position:relative;
    z-index:5;
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
  }
  .profile-orb .inner{
    width:88%; height:88%; border-radius:50%; overflow:hidden; display:block;
    border:4px solid rgba(255,255,255,0.04); box-shadow: 0 10px 40px rgba(0,0,0,0.45);
  }
  .profile-orb img{ width:100%; height:100%; object-fit:cover; display:block }

  /* soft glowing halo */
  .profile-orb::after{
    content:''; position:absolute; inset:-8px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, rgba(0,212,255,0.12), transparent 18%),
                radial-gradient(circle at 70% 70%, rgba(138,255,110,0.06), transparent 22%);
    filter: blur(10px); opacity:0.95; pointer-events:none;
  }

  h1.name{
    font-size: clamp(28px,4.5vw,44px); letter-spacing:-0.6px; font-weight:800;
    text-shadow: 0 8px 40px rgba(0,0,0,0.55);
  }
  .tagline{color:var(--muted); font-weight:500; max-width:820px}

  /* Floating navigation orbs around profile */
  .nav-orbs{
    position: absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:100%; height:100%;
    pointer-events:none; z-index:4;
  }
  .orb{
    position:absolute; width:var(--nav-orb-size); height:var(--nav-orb-size);
    border-radius:50%; background:rgba(255,255,255,0.03); display:flex; align-items:center; justify-content:center;
    border:1px solid rgba(255,255,255,0.04); color:var(--muted); font-weight:600; font-size:13px;
    transition: transform 240ms var(--ease), box-shadow 240ms var(--ease), background 240ms;
    pointer-events:auto;
  }
  .orb:hover{ transform:scale(1.06); box-shadow:0 16px 40px rgba(0,0,0,0.65); background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent) }
  .orb[data-target="about"]{ transform: translate(-220px, -90px) }
  .orb[data-target="skills"]{ transform: translate(-120px, 120px) }
  .orb[data-target="projects"]{ transform: translate(120px, -120px) }
  .orb[data-target="resume"]{ transform: translate(220px, 0px) }
  .orb[data-target="contact"]{ transform: translate(120px, 120px) }

  /* CTA cluster */
  .hero-cta{ margin-top:12px; display:flex; gap:12px; justify-content:center }
  .btn{
    padding:10px 16px; border-radius:12px; border:1px solid rgba(255,255,255,0.04);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    cursor:pointer; color:#e6fbff; font-weight:700; letter-spacing:0.2px; font-size:14px;
    transition: transform 220ms var(--ease), box-shadow 220ms var(--ease);
  }
  .btn:hover{ transform:translateY(-4px); box-shadow: 0 18px 40px rgba(0,0,0,0.6) }
  .btn.ghost{ background:transparent; color:var(--muted) }

  .scroll-indicator{ margin-top:26px; color:var(--muted); font-size:13px; animation:pulse 1.8s infinite }
  @keyframes pulse{ 0%{transform:translateY(0)}50%{transform:translateY(8px)}100%{transform:translateY(0)} }

  /* ===========================
     Sections: About / Skills / Projects / Resume / Contact
     =========================== */
  section {
    padding:72px 0;
    position:relative;
    z-index:3;
  }
  .section-title{ margin-bottom:18px; font-size:20px; font-weight:700; letter-spacing:0.6px }

  /* Two-column layout for about */
  .about-grid{
    display:grid; grid-template-columns: 380px 1fr; gap:28px; align-items:start;
  }
  .about-card{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px; padding:18px; border:1px solid rgba(255,255,255,0.04);
  }
  .timeline{
    margin-top:12px; display:flex; flex-direction:column; gap:10px; position:relative;
  }
  .tl-line{
    position:absolute; left:32px; top:6px; bottom:6px; width:2px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0));
    border-radius:2px;
  }
  .tl-item{
    display:flex; gap:12px; align-items:flex-start; padding-left:46px; opacity:0; transform:translateY(10px);
    transition:all 560ms var(--ease);
  }
  .tl-item.active{ opacity:1; transform:none }
  .tl-bullet{ width:14px; height:14px; border-radius:50%; background: linear-gradient(90deg,var(--accent),var(--accent2)); margin-top:6px; flex:0 0 14px; }

  /* Skills: globe area and fallback cluster */
  .skills-area{ display:flex; gap:24px; align-items:center; justify-content:center; flex-wrap:wrap; }
  .globe-wrap{ flex:1; min-height:340px; display:flex; align-items:center; justify-content:center; position:relative; }
  #globeCanvas{ width:100%; height:100%; display:block; }
  .skills-fallback{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
  .skill-pill{ padding:10px 14px; border-radius:10px; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border:1px solid rgba(255,255,255,0.04); font-weight:700; min-width:110px; text-align:center }

  /* Projects: horizontal gallery */
  .projects-strip{
    display:flex; gap:20px; overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; padding-bottom:12px;
  }
  .project-card{
    scroll-snap-align:center; min-width:100%; flex:0 0 100%; height:64vh; position:relative; border-radius:14px; overflow:hidden;
    display:flex; align-items:flex-end; padding:28px; background:#081016; border:1px solid rgba(255,255,255,0.03);
    box-shadow: 0 30px 80px rgba(0,0,0,0.75);
  }
  .project-thumb{ position:absolute; inset:0; background-size:cover; background-position:center; transform:scale(1.05); filter:brightness(0.45) contrast(1.05); transition:transform 800ms var(--ease) }
  .project-content{ position:relative; z-index:3; max-width:720px; color:var(--muted) }
  .project-controls{ display:flex; gap:10px; justify-content:center; margin-top:12px }

  /* Modal for project details */
  .modal{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9999; backdrop-filter: blur(6px);
  }
  .modal.active{ display:flex }
  .modal-card{
    width:94%; max-width:1100px; max-height:88vh; overflow:auto; border-radius:14px; padding:20px;
    background: linear-gradient(180deg, rgba(10,14,18,0.98), rgba(6,10,12,0.96)); border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 40px 120px rgba(0,0,0,0.8);
  }
  .modal-grid{ display:grid; grid-template-columns: 1fr 360px; gap:18px }
  .modal-grid img{ width:100%; border-radius:8px; display:block }

  /* Resume viewer */
  .resume-box{ display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; }
  .resume-embed{ flex:1; min-width:320px; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04) }
  .resume-embed iframe{ width:100%; height:520px; border:0; display:block }

  /* Contact: conversational */
  .contact-box{ max-width:760px; margin:0 auto; padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border:1px solid rgba(255,255,255,0.04) }
  .conv-flow{ display:flex; flex-direction:column; gap:12px }
  .conv-row{ display:flex; gap:12px; align-items:center }
  .conv-row .prompt{ min-width:160px; color:var(--muted) }
  .conv-input{ flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:inherit }

  /* Footer */
  footer{ padding:26px 0; text-align:center; color:var(--muted); font-size:13px }

  /* simple responsive */
  @media (max-width:980px){
    .about-grid{ grid-template-columns: 1fr; }
    .profile-orb{ width:200px; height:200px; }
    .nav-orbs .orb{ display:none } /* hide for small devices and rely on hamburger */
    .project-card{ height:52vh }
    .modal-grid{ grid-template-columns: 1fr }
    .resume-embed iframe{ height:420px }
  }
  @media (max-width:520px){
    :root{ --hero-profile-size:140px; --nav-orb-size:50px }
    .hero-inner{ gap:12px }
    h1.name{ font-size:20px }
    .tagline{ font-size:13px; max-width:320px }
    .project-card{ height:44vh }
    .resume-embed iframe{ height:360px }
    .conv-row .prompt{ display:none }
  }
  /* accessibility */
  .sr-only{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
  </style>
</head>
<body>

<canvas id="bgCanvas" aria-hidden="true"></canvas>
<div class="bg-overlay" aria-hidden="true"></div>

<main>
  <!-- HERO -->
  <header class="hero" role="banner" aria-labelledby="heroTitle">
    <div class="wrap hero-inner">
      <div class="nav-orbs" aria-hidden="true">
        <div class="orb" data-target="about" title="About">About</div>
        <div class="orb" data-target="skills" title="Skills">Skills</div>
        <div class="orb" data-target="projects" title="Projects">Projects</div>
        <div class="orb" data-target="resume" title="Resume">Resume</div>
        <div class="orb" data-target="contact" title="Contact">Contact</div>
      </div>

      <div id="profileContainer" class="profile-orb" tabindex="0" aria-label="Profile — click to explore">
        <div class="inner">
          <!-- Put your image at Image/Profile.JPG -->
          <img src="Image/Profile.JPG" alt="Profile photo of Dilip Choudhary" id="profileImage" onerror="this.src='https://via.placeholder.com/400?text=Profile'">
        </div>
      </div>

      <h1 id="heroTitle" class="name">Dilip Choudhary</h1>
      <div class="tagline">Transforming data into decisions — one insight at a time.</div>

      <div class="hero-cta">
        <button class="btn" id="exploreBtn">Explore</button>
        <a class="btn ghost" href="resume.pdf" target="_blank" rel="noopener">Download Resume</a>
      </div>

      <div class="scroll-indicator" id="scrollBadge">Scroll to explore ⌄</div>
    </div>
  </header>

  <!-- ABOUT -->
  <section id="about" class="wrap" aria-labelledby="aboutTitle">
    <h2 id="aboutTitle" class="section-title">About — Story</h2>
    <div class="about-grid">
      <div class="about-card" aria-hidden="false">
        <div style="display:flex;flex-direction:column;gap:12px;">
          <div style="display:flex;gap:12px;align-items:center;">
            <div style="width:72px;height:72px;border-radius:12px;background:linear-gradient(90deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#021; font-size:20px">DC</div>
            <div>
              <div style="font-weight:800; font-size:18px">Dilip Choudhary</div>
              <div style="color:var(--muted); font-size:13px">Business Analytics · Hyderabad</div>
            </div>
          </div>

          <p style="color:var(--muted); margin-top:6px">I craft practical, high-impact analytics and dashboards that stakeholders actually use. I combine rigorous data-cleaning, efficient ETL thinking, and crisp storytelling through visuals and dashboards to turn messy data into decisions.</p>

          <div style="display:flex;gap:8px; margin-top:6px; flex-wrap:wrap;">
            <span class="skill-pill">Excel</span>
            <span class="skill-pill">Power BI</span>
            <span class="skill-pill">SQL</span>
            <span class="skill-pill">Python</span>
            <span class="skill-pill">Tableau</span>
          </div>
        </div>

        <div class="timeline" id="aboutTimeline" style="margin-top:18px; position:relative;">
          <div class="tl-line" aria-hidden="true"></div>

          <div class="tl-item" data-year="2019">
            <div class="tl-bullet"></div>
            <div>
              <div style="font-weight:700">Started Analytics Journey — 2019</div>
              <div style="color:var(--muted)">Excel basics → Power Query → first dashboards</div>
            </div>
          </div>

          <div class="tl-item" data-year="2022">
            <div class="tl-bullet"></div>
            <div>
              <div style="font-weight:700">First End-to-End Project — 2022</div>
              <div style="color:var(--muted)">Revenue insights dashboard: DSO, returns, delivery analysis</div>
            </div>
          </div>

          <div class="tl-item" data-year="2024">
            <div class="tl-bullet"></div>
            <div>
              <div style="font-weight:700">Upskilling & Projects — 2024</div>
              <div style="color:var(--muted)">SQL, Python, Power BI, data modelling & automated reporting</div>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="about-card" style="margin-bottom:18px">
          <h3 style="margin-bottom:8px">Signature</h3>
          <p style="color:var(--muted)">I design dashboards that reduce guesswork — not dashboards that make slides prettier. Decisions > Vanity metrics.</p>
        </div>

        <div class="about-card">
          <h3 style="margin-bottom:8px">Quick Facts</h3>
          <ul style="color:var(--muted); padding-left:18px">
            <li>Location: Hyderabad, India</li>
            <li>Availability: Open to roles & internships</li>
            <li>Goal: Get industry experience → CFA → global business</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" class="wrap" aria-labelledby="skillsTitle">
    <h2 id="skillsTitle" class="section-title">Skills — Interactive Globe</h2>
    <p style="color:var(--muted); margin-bottom:12px">Hover points on the globe to learn how I use each skill. (Fallback to pills on low power/browsers.)</p>

    <div class="skills-area">
      <div class="globe-wrap" id="globeWrap">
        <!-- Three.js canvas inserted via JS -->
        <canvas id="globeCanvas"></canvas>
        <div id="globeFallback" class="skills-fallback" style="display:none;">
          <div class="skill-pill">Excel — Advanced</div>
          <div class="skill-pill">Power BI — Advanced</div>
          <div class="skill-pill">SQL — Intermediate</div>
          <div class="skill-pill">Python — Intermediate</div>
          <div class="skill-pill">Tableau — Intermediate</div>
        </div>
      </div>

      <div style="min-width:300px; max-width:420px;">
        <div class="about-card">
          <h3 style="margin-bottom:8px">How I apply skills</h3>
          <p style="color:var(--muted)">I combine Excel + Power Query for fast ETL & prototyping, then model data in Power BI and build DAX measures for stakeholder-ready insights. SQL and Python power deeper analyses and automation.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="wrap" aria-labelledby="projectsTitle">
    <h2 id="projectsTitle" class="section-title">Projects — Gallery</h2>
    <p style="color:var(--muted); margin-bottom:12px">Swipe horizontally on mobile. Click any card to open the full case study modal.</p>

    <div class="projects-strip" id="projectsStrip" role="list">
      <!-- P3ABC -->
      <article class="project-card" data-project="P3ABC" tabindex="0" role="listitem">
        <div class="project-thumb" style="background-image:url('Image/P3ABC/1.png')" aria-hidden="true"></div>
        <div class="project-content">
          <h3 style="margin:0 0 6px 0">P3ABC — Revenue Insights</h3>
          <p style="color:var(--muted)">Automated invoice tracking, DSO analysis, return & delivery KPIs. Built for finance clarity.</p>
          <div style="margin-top:10px;">
            <button class="btn" data-open="P3ABC">Open Case Study</button>
          </div>
        </div>
      </article>

      <!-- Projectcrypto -->
      <article class="project-card" data-project="Projectcrypto" tabindex="0" role="listitem">
        <div class="project-thumb" style="background-image:url('Image/Projectcrypto/1.png')" aria-hidden="true"></div>
        <div class="project-content">
          <h3 style="margin:0 0 6px 0">Crypto Analysis</h3>
          <p style="color:var(--muted)">Momentum & risk analysis with backtests and heatmaps. Prototype-level insights with visualization demos.</p>
          <div style="margin-top:10px;"><button class="btn" data-open="Projectcrypto">Open Case Study</button></div>
        </div>
      </article>

      <!-- Projectec -->
      <article class="project-card" data-project="Projectec" tabindex="0" role="listitem">
        <div class="project-thumb" style="background-image:url('Image/Projectec/1.png')" aria-hidden="true"></div>
        <div class="project-content">
          <h3 style="margin:0 0 6px 0">Electricity Forecast</h3>
          <p style="color:var(--muted)">Time-series forecasting + anomaly detection; operations-focused dashboards and alerts.</p>
          <div style="margin-top:10px;"><button class="btn" data-open="Projectec">Open Case Study</button></div>
        </div>
      </article>
    </div>

    <div class="project-controls" style="margin-top:12px; display:flex; justify-content:center;">
      <button class="btn ghost" id="prevProject">&larr;</button>
      <div style="width:12px"></div>
      <button class="btn ghost" id="nextProject">&rarr;</button>
    </div>
  </section>

  <!-- RESUME -->
  <section id="resume" class="wrap" aria-labelledby="resumeTitle">
    <h2 id="resumeTitle" class="section-title">Resume — Quick View</h2>
    <div class="resume-box">
      <div style="flex:1">
        <div class="resume-embed" id="resumeEmbed">
          <iframe src="resume.pdf" title="Resume PDF" onerror="this.src='about:blank'"></iframe>
        </div>
      </div>
      <div style="min-width:220px">
        <div class="about-card">
          <h3 style="margin-bottom:8px">Download</h3>
          <p style="color:var(--muted); margin-bottom:12px">Get a local copy of my resume.</p>
          <a class="btn" href="resume.pdf" download>Download PDF</a>
          <div style="height:12px"></div>
          <a class="btn ghost" id="openResumeFullscreen">Open Fullscreen</a>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="wrap" aria-labelledby="contactTitle">
    <h2 id="contactTitle" class="section-title">Let’s Talk — Conversational</h2>
    <p style="color:var(--muted); margin-bottom:12px">Short, human, and direct. Fill the chat-like flow below.</p>

    <div class="contact-box">
      <div class="conv-flow" id="convFlow">
        <div class="conv-row" id="row1">
          <div class="prompt">Hey, what’s your name?</div>
          <input class="conv-input" id="cName" placeholder="Your name">
        </div>

        <div class="conv-row" id="row2" style="opacity:0; transform:translateY(8px)">
          <div class="prompt">Email?</div>
          <input class="conv-input" id="cEmail" placeholder="you@company.com">
        </div>

        <div class="conv-row" id="row3" style="opacity:0; transform:translateY(8px)">
          <div class="prompt">Project / Role</div>
          <input class="conv-input" id="cMsg" placeholder="Short description">
        </div>

        <div style="display:flex; gap:12px; margin-top:10px; align-items:center;">
          <button class="btn" id="sendMsg">Send</button>
          <div style="flex:1"></div>
          <div id="sendSuccess" style="display:none;color:var(--accent2); font-weight:800">Thanks — I’ll reply within 48 hours.</div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap" style="display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px">
      <div style="display:flex;align-items:center;gap:8px">
        <div style="width:36px;height:36px;border-radius:8px;background:linear-gradient(90deg,var(--accent),var(--accent2))"></div>
        <div style="font-weight:700">Dilip Choudhary</div>
      </div>
      <div style="color:var(--muted);font-size:13px">© <span id="curYear"></span> — Built to be unforgettable.</div>
    </div>
  </footer>
</main>

<!-- Modal -->
<div class="modal" id="projectModal" aria-hidden="true">
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <h3 id="modalTitle">Project</h3>
        <div id="modalSubtitle" style="color:var(--muted);font-size:13px"></div>
      </div>
      <div style="display:flex;gap:8px">
        <button class="btn ghost" id="modalClose">Close</button>
      </div>
    </div>

    <div style="height:14px"></div>

    <div class="modal-grid" id="modalGrid">
      <div id="modalLeft">
        <!-- images appended here -->
      </div>
      <aside id="modalSide" style="padding-left:8px">
        <h4>Summary</h4>
        <p id="modalSummary" style="color:var(--muted)"></p>
        <h4>Impact</h4>
        <p id="modalImpact" style="color:var(--muted)"></p>
        <div style="height:8px"></div>
        <a class="btn" href="resume.pdf" target="_blank">View Resume</a>
      </aside>
    </div>
  </div>
</div>

<script>
/* ===========================================================================
   Utility helpers & small environment checks
   =========================================================================== */
(() => {
  window._env = {
    supportsWebGL: (function(){
      try{
        const canvas = document.createElement('canvas');
        return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
      }catch(e){ return false; }
    })()
  };
})();

/* ===========================================================================
   Background canvas particle/starfield
   ===========================================================================
   - responsive, mouse-aware
   - scroll-reactive (depth and speed change)
*/
(function(){
  const canvas = document.getElementById('bgCanvas');
  const ctx = canvas.getContext('2d');
  let DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  let W = canvas.width = innerWidth * DPR;
  let H = canvas.height = innerHeight * DPR;
  canvas.style.width = innerWidth + 'px';
  canvas.style.height = innerHeight + 'px';

  let mouse = {x: innerWidth/2, y: innerHeight/2};
  addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
  addEventListener('touchmove', e => { if(e.touches && e.touches[0]) { mouse.x = e.touches[0].clientX; mouse.y = e.touches[0].clientY } }, {passive:true});
  addEventListener('resize', () => {
    DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    W = canvas.width = innerWidth * DPR;
    H = canvas.height = innerHeight * DPR;
    canvas.style.width = innerWidth + 'px';
    canvas.style.height = innerHeight + 'px';
  });

  const particles = [];
  const NUM = Math.floor(Math.max(60, Math.min(220, (innerWidth * innerHeight) / 10000)));

  function rand(a,b){ return Math.random()*(b-a)+a; }

  for(let i=0;i<NUM;i++){
    particles.push({
      x: Math.random()*W,
      y: Math.random()*H,
      r: rand(0.6, 3.2),
      vx: rand(-0.15,0.15),
      vy: rand(-0.15,0.15),
      hue: rand(180,210),
      life: rand(30, 320),
      baseAlpha: rand(0.025, 0.12)
    });
  }

  let last = performance.now();
  function step(now){
    const dt = (now - last) / 16.6; last = now;
    ctx.clearRect(0,0,W,H);

    // subtle gradient background overlay to add depth
    const g = ctx.createLinearGradient(0,0,0,H);
    g.addColorStop(0,'rgba(0,0,0,0.00)');
    g.addColorStop(1,'rgba(0,0,0,0.20)');
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // update draw
    for(let p of particles){
      // move slightly towards mouse but tempered
      const mx = mouse.x * DPR, my = mouse.y * DPR;
      const dx = mx - p.x, dy = my - p.y, d = Math.sqrt(dx*dx+dy*dy);
      if(d < 160 * DPR){
        p.vx += (dx/d) * 0.0025 * dt;
        p.vy += (dy/d) * 0.0025 * dt;
      } else {
        p.vx += rand(-0.01,0.01) * dt;
        p.vy += rand(-0.01,0.01) * dt;
      }

      p.x += p.vx * dt;
      p.y += p.vy * dt;
      p.vx *= 0.995; p.vy *= 0.995;

      // wrap
      if(p.x < -40) p.x = W+40;
      if(p.x > W+40) p.x = -40;
      if(p.y < -40) p.y = H+40;
      if(p.y > H+40) p.y = -40;

      // draw
      ctx.beginPath();
      const alpha = Math.max(0.02, p.baseAlpha + Math.sin(now/700 + p.r) * 0.03);
      ctx.fillStyle = `rgba(0,200,255,${alpha})`;
      ctx.arc(p.x, p.y, p.r * DPR, 0, Math.PI*2);
      ctx.fill();
    }

    // subtle lines
    for(let i=0;i<28;i++){
      const a = particles[(i*7) % particles.length];
      const b = particles[(i*13 + 3) % particles.length];
      const dist = Math.hypot(a.x - b.x, a.y - b.y);
      if(dist < 160 * DPR){
        ctx.beginPath();
        ctx.strokeStyle = `rgba(0,200,255,${0.01 + (1 - (dist/(160*DPR)))*0.06})`;
        ctx.lineWidth = 1;
        ctx.moveTo(a.x, a.y);
        ctx.lineTo(b.x, b.y);
        ctx.stroke();
      }
    }

    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
})();

/* ===========================================================================
   Hero interactions: tilt on mouse, click/explore behavior, profile micro-interactions
   =========================================================================== */
(function(){
  const profile = document.getElementById('profileContainer');
  const explore = document.getElementById('exploreBtn');
  const scrollBadge = document.getElementById('scrollBadge');
  let clickCount = 0;

  // tilt effect
  document.addEventListener('mousemove', function(e){
    const cx = innerWidth/2, cy = innerHeight/2;
    const dx = (e.clientX - cx) / (cx);
    const dy = (e.clientY - cy) / (cy);
    const rx = Math.max(-8, Math.min(8, -dy * 6));
    const ry = Math.max(-12, Math.min(12, dx * 8));
    profile.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(6px)`;
  });

  // click handler (5 clicks -> reveal secret)
  profile.addEventListener('click', ()=>{
    clickCount++;
    if(clickCount >= 5){
      clickCount = 0;
      revealBehindTheScenes();
    } else {
      // subtle bounce
      gsap.fromTo(profile, {scale:1}, {scale:1.04, duration:0.12, yoyo:true, repeat:1, ease:"power1.inOut"});
    }
  });

  // keyboard: type 'showcase' toggles theme
  (function(){
    let buffer = '';
    window.addEventListener('keydown', e=>{
      if(e.key.length === 1) buffer += e.key.toLowerCase();
      if(e.key === 'Backspace') buffer = buffer.slice(0, -1);
      if(buffer.includes('showcase')){
        buffer = '';
        toggleTheme();
      }
      if(buffer.length > 20) buffer = buffer.slice(-20);
    });
  })();

  function toggleTheme(){
    // swap a few CSS variables for a temporary theme
    const root = document.documentElement;
    const old = root.style.getPropertyValue('--accent');
    // quick theme flash
    root.style.setProperty('--accent', '#ff6ec7');
    root.style.setProperty('--accent2', '#ffd166');
    setTimeout(()=>{ root.style.setProperty('--accent', '#00d4ff'); root.style.setProperty('--accent2', '#8aff6e'); }, 4200);
  }

  function revealBehindTheScenes(){
    // quick modal-like pocket showing extra images (we'll append a temporary floating panel)
    const panel = document.createElement('div');
    panel.style.position='fixed'; panel.style.right='22px'; panel.style.bottom='22px'; panel.style.zIndex=99999;
    panel.style.width='360px'; panel.style.maxHeight='62vh'; panel.style.overflow='auto';
    panel.style.borderRadius='12px'; panel.style.padding='12px';
    panel.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
    panel.style.border='1px solid rgba(255,255,255,0.04)';
    panel.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong>Behind the Scenes</strong>
      <button style="background:transparent;border:none;color:var(--muted);cursor:pointer;font-weight:700">Close</button>
    </div>
    <div style="display:flex;flex-direction:column;gap:8px">
      <img src="Image/P3ABC/Sprint.png" style="width:100%;border-radius:8px" alt="sprint" onerror="this.style.display='none'">
      <img src="Image/P3ABC/UAT.png" style="width:100%;border-radius:8px" alt="uat" onerror="this.style.display='none'">
      <img src="Image/Projectcrypto/2.png" style="width:100%;border-radius:8px" alt="crypto" onerror="this.style.display='none'">
    </div>`;
    document.body.appendChild(panel);
    panel.querySelector('button').addEventListener('click', ()=> panel.remove());
    setTimeout(()=>{ panel.style.transform='translateY(0)'; },80);
  }

  // explore: smooth scroll to about
  explore.addEventListener('click', ()=> {
    document.querySelector('#about').scrollIntoView({behavior:'smooth'});
  });

  // hide scroll hint when the user scrolls
  let sawScroll = false;
  addEventListener('scroll', () => {
    if(window.scrollY > 40 && !sawScroll){ sawScroll = true; gsap.to(scrollBadge, {opacity:0, duration:0.6, onComplete: ()=> scrollBadge.style.display='none' }) }
  });
})();

/* ===========================================================================
   Timeline reveal with IntersectionObserver
   ===========================================================================
*/
(function(){
  const items = document.querySelectorAll('.tl-item');
  const io = new IntersectionObserver(entries=>{
    entries.forEach(en=>{
      if(en.isIntersecting) en.target.classList.add('active');
    });
  }, {threshold:0.12});
  items.forEach(it=>io.observe(it));
})();

/* ===========================================================================
   Skills globe (Three.js) with fallback
   - clickable hotspots show micro-cards
   - simple sphere with points
   ===========================================================================
*/
(function(){
  const wrap = document.getElementById('globeWrap');
  const canvas = document.getElementById('globeCanvas');
  const fallback = document.getElementById('globeFallback');
  const skills = [
    {name:'Excel', desc:'Power Query, advanced formulas, modelling'},
    {name:'Power BI', desc:'DAX, dashboard design, data model'},
    {name:'SQL', desc:'Joins, windows, ETL queries'},
    {name:'Python', desc:'Pandas, scripts, automations'},
    {name:'Tableau', desc:'Viz and storytelling'},
    {name:'R', desc:'Statistical analysis (learning)'}
  ];

  // if no WebGL or low-end device, show fallback pills
  if(!window._env.supportsWebGL || /Mobi|Android|iPhone/i.test(navigator.userAgent)){
    canvas.style.display='none';
    fallback.style.display='flex';
    return;
  }

  // Three.js setup
  let scene, camera, renderer, sphere, points;
  const DPR = Math.min(2, window.devicePixelRatio || 1);
  function init(){
    scene = new THREE.Scene();
    const vw = wrap.clientWidth, vh = wrap.clientHeight || 400;
    camera = new THREE.PerspectiveCamera(50, vw / vh, 0.1, 1000);
    camera.position.set(0,0,210);

    renderer = new THREE.WebGLRenderer({canvas:canvas, alpha:true, antialias:true});
    renderer.setPixelRatio(DPR);
    renderer.setSize(vw, vh);

    // ambient
    const amb = new THREE.AmbientLight(0xffffff, 0.9);
    scene.add(amb);

    // sphere (wireframe-ish)
    const geom = new THREE.SphereGeometry(80, 36, 24);
    const mat = new THREE.MeshStandardMaterial({color:0x022335, wireframe:false, opacity:0.06, transparent:true});
    sphere = new THREE.Mesh(geom, mat);
    scene.add(sphere);

    // points
    const pointGroup = new THREE.Group();
    skills.forEach((s, i) => {
      const phi = Math.acos(-1 + (2 * i) / skills.length);
      const theta = Math.sqrt(skills.length * Math.PI) * phi;
      const x = 80 * Math.cos(theta) * Math.sin(phi);
      const y = 80 * Math.sin(theta) * Math.sin(phi);
      const z = 80 * Math.cos(phi);

      // small sprite
      const spriteMaterial = new THREE.SpriteMaterial({color:0x00d4ff, opacity:0.9});
      const sprite = new THREE.Sprite(spriteMaterial);
      sprite.scale.set(8,8,1);
      sprite.position.set(x,y,z);
      sprite.userData = { skill: s };
      pointGroup.add(sprite);
    });
    scene.add(pointGroup);
    points = pointGroup;

    // rotate gently
    animate();
    // raycaster for hover
    raycasterSetup();
  }

  let last = 0;
  function animate(t){
    requestAnimationFrame(animate);
    const time = t * 0.001;
    sphere.rotation.y = time * 0.08;
    if(points) points.rotation.y = time * 0.06;
    renderer.render(scene, camera);
  }

  function onResize(){
    const vw = wrap.clientWidth, vh = wrap.clientHeight || 420;
    camera.aspect = vw / vh;
    camera.updateProjectionMatrix();
    renderer.setSize(vw, vh);
  }
  window.addEventListener('resize', onResize);

  function raycasterSetup(){
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const tooltip = document.createElement('div');
    tooltip.style.position='absolute';
    tooltip.style.padding='8px 10px';
    tooltip.style.borderRadius='8px';
    tooltip.style.background='rgba(0,0,0,0.6)';
    tooltip.style.color='white';
    tooltip.style.fontSize='13px';
    tooltip.style.pointerEvents='none';
    tooltip.style.display='none';
    tooltip.style.zIndex=99999;
    wrap.appendChild(tooltip);

    function onMove(e){
      const rect = renderer.domElement.getBoundingClientRect();
      const x = ( (e.clientX - rect.left) / rect.width ) * 2 - 1;
      const y = - ( (e.clientY - rect.top) / rect.height ) * 2 + 1;
      mouse.set(x,y);
      raycaster.setFromCamera(mouse, camera);
      const intersects = raycaster.intersectObjects(points.children);
      if(intersects.length){
        const obj = intersects[0].object;
        const skill = obj.userData.skill;
        tooltip.style.left = (e.clientX + 14) + 'px';
        tooltip.style.top = (e.clientY + 14) + 'px';
        tooltip.innerHTML = `<strong>${skill.name}</strong><div style="font-size:12px;color:#ccf">${skill.desc}</div>`;
        tooltip.style.display = 'block';
      } else {
        tooltip.style.display = 'none';
      }
    }
    renderer.domElement.addEventListener('mousemove', onMove);
    renderer.domElement.addEventListener('touchstart', (ev) => {
      if(ev.touches && ev.touches[0]) onMove(ev.touches[0]);
    }, {passive:true});
  }

  try{ init(); }catch(e){ console.warn('Globe init failed', e); canvas.style.display='none'; fallback.style.display='flex' }
})();

/* ===========================================================================
   Projects gallery controls, modal content loading
   =========================================================================== */
(function(){
  const projectsStrip = document.getElementById('projectsStrip');
  const prevBtn = document.getElementById('prevProject');
  const nextBtn = document.getElementById('nextProject');

  prevBtn.addEventListener('click', ()=> {
    projectsStrip.scrollBy({left: -window.innerWidth, behavior:'smooth'});
  });
  nextBtn.addEventListener('click', ()=> {
    projectsStrip.scrollBy({left: window.innerWidth, behavior:'smooth'});
  });

  // data map based on repo structure
  const projectData = {
    'P3ABC': {
      title:'P3ABC — Revenue Insights',
      subtitle:'Automated invoices & DSO tracking',
      folder:'Image/P3ABC/',
      images:['1.png','Sprint.png','UAT Results.png','UAT Scenario.png','UAT Signoff.png','UAT.png','test_case.png'],
      summary:'Created automated ETL and KPI surfaces solving invoice tracking and cashflow uncertainty.',
      impact:'Simulated 32% reduction in delayed payments; improved finance visibility.'
    },
    'Projectcrypto': {
      title:'Crypto Analysis',
      subtitle:'Momentum & Risk Backtests',
      folder:'Image/Projectcrypto/',
      images:['1.png','2.png','3.png'],
      summary:'Conducted exploratory analysis and strategy backtesting to visualize risk-adjusted momentum.',
      impact:'Clear framework for risk controls and visualization of entry/exit signals.'
    },
    'Projectec': {
      title:'Electricity Forecast',
      subtitle:'Forecasts & Anomaly Detection',
      folder:'Image/Projectec/',
      images:['1.png','2.png','3.png','4.png'],
      summary:'Built a forecasting pipeline and dashboard for operational monitoring.',
      impact:'Prototype improved forecast accuracy by ~10% in sample window.'
    }
  };

  // open modal
  const modal = document.getElementById('projectModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalSubtitle = document.getElementById('modalSubtitle');
  const modalLeft = document.getElementById('modalLeft');
  const modalSummary = document.getElementById('modalSummary');
  const modalImpact = document.getElementById('modalImpact');
  const modalClose = document.getElementById('modalClose');

  document.querySelectorAll('[data-open]').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      const key = e.currentTarget.getAttribute('data-open');
      openProjectModal(key);
    });
  });

  function openProjectModal(key){
    const pd = projectData[key];
    if(!pd) return;
    modalTitle.textContent = pd.title;
    modalSubtitle.textContent = pd.subtitle;
    modalSummary.textContent = pd.summary;
    modalImpact.textContent = pd.impact;
    modalLeft.innerHTML = '';
    pd.images.forEach(name => {
      const img = document.createElement('img');
      img.src = pd.folder + name;
      img.alt = pd.title + ' ' + name;
      img.loading = 'lazy';
      img.style.marginBottom = '10px';
      img.onerror = () => { img.style.display = 'none'; }
      modalLeft.appendChild(img);
    });
    modal.classList.add('active');
    modal.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
  }

  modalClose.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });
  function closeModal(){ modal.classList.remove('active'); modal.setAttribute('aria-hidden','true'); document.body.style.overflow = ''; }
})();

/* ===========================================================================
   Resume fullscreen opener
   =========================================================================== */
(function(){
  const btn = document.getElementById('openResumeFullscreen');
  btn.addEventListener('click', ()=>{
    // open in new window/tab fullscreen
    window.open('resume.pdf', '_blank', 'noopener');
  });
})();

/* ===========================================================================
   Conversational contact flow
   - simple frontend simulation (replace send logic with serverless endpoint)
   =========================================================================== */
(function(){
  const nameInput = document.getElementById('cName');
  const emailInput = document.getElementById('cEmail');
  const msgInput = document.getElementById('cMsg');
  const row2 = document.getElementById('row2');
  const row3 = document.getElementById('row3');
  const sendBtn = document.getElementById('sendMsg');
  const success = document.getElementById('sendSuccess');

  nameInput.addEventListener('input', ()=>{
    if(nameInput.value.trim().length > 1){
      gsap.to(row2, {autoAlpha:1, y:0, duration:0.35}); row2.style.display='flex';
    } else {
      gsap.to(row2, {autoAlpha:0, y:8, duration:0.25});
    }
  });

  emailInput.addEventListener('input', ()=>{
    if(emailInput.value.includes('@')){
      gsap.to(row3, {autoAlpha:1, y:0, duration:0.35}); row3.style.display='flex';
    } else {
      gsap.to(row3, {autoAlpha:0, y:8, duration:0.25});
    }
  });

  sendBtn.addEventListener('click', async ()=>{
    const n = nameInput.value.trim(), e = emailInput.value.trim(), m = msgInput.value.trim();
    if(!n || !e || !m){ alert('Please complete the quick conversation.'); return; }

    sendBtn.disabled = true; sendBtn.textContent = 'Sending...';
    // simulate network latency
    await new Promise(r=>setTimeout(r, 900));
    success.style.display = 'block';
    sendBtn.textContent = 'Sent';
    sendBtn.disabled = false;

    // particle burst near profile
    const burst = document.createElement('div');
    burst.style.position='fixed'; burst.style.left='50%'; burst.style.top='18%'; burst.style.width='8px'; burst.style.height='8px'; burst.style.borderRadius='50%';
    document.body.appendChild(burst);
    setTimeout(()=>burst.remove(),1200);

    // clear form slowly
    setTimeout(()=>{ nameInput.value=''; emailInput.value=''; msgInput.value=''; gsap.to([row2,row3], {autoAlpha:0, y:8, duration:0.25}); }, 1200);
  });
})();

/* ===========================================================================
   Small niceties: year, orb navigation clicks, accessibility
   =========================================================================== */
(function(){
  document.getElementById('curYear').textContent = new Date().getFullYear();

  // orb nav clicks
  document.querySelectorAll('.orb').forEach(o=>{
    o.addEventListener('click', ()=>{
      const t = o.getAttribute('data-target');
      const el = document.getElementById(t);
      if(el) el.scrollIntoView({behavior:'smooth'});
    });
  });

  // keyboard: pressing enter on profile also explores
  document.getElementById('profileContainer').addEventListener('keydown', (e)=>{
    if(e.key === 'Enter') document.getElementById('exploreBtn').click();
  });
})();
</script>
</body>
</html>
